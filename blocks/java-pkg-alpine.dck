{{ var major = fp.config.version.major; }}
# /dev/urandom is used as random source, which is prefectly safe
# according to http://www.2uo.de/myths-about-urandom/
RUN {{? major == 8 }}echo "http://dl-4.alpinelinux.org/alpine/edge/community" >> /etc/apk/repositories \
 && {{?}}apk add --update --allow-untrusted \
    curl \
    {{= fp.param.type == 'jre' ? 'openjdk' + major + '-jre-base' : 'openjdk' + major }} \
 && rm /var/cache/apk/* \
 && echo "securerandom.source=file:/dev/urandom" >> /usr/lib/jvm/default-jvm/jre/lib/security/java.security
